# æ´»åŠ¨é‡‡é›†ç³»ç»Ÿä½¿ç”¨æŒ‡å—

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ´»åŠ¨æ•°æ®é‡‡é›†ã€æ¸…ç†å’Œç®¡ç†ç³»ç»Ÿï¼Œç”¨äºä»æ´»åŠ¨è¡Œç½‘ç«™é‡‡é›†çº¿ä¸‹æ´»åŠ¨ä¿¡æ¯ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æµ‹è¯•ç³»ç»Ÿ
```bash
npm run events:workflow:test
```

### 2. å¿«é€Ÿé‡‡é›†
```bash
npm run events:workflow:quick
```

### 3. å®Œæ•´å·¥ä½œæµç¨‹
```bash
npm run events:workflow
```

## ğŸ“‹ å¯ç”¨å‘½ä»¤

### é‡‡é›†ç›¸å…³
- `npm run scrape:events` - é‡‡é›†æ–°æ´»åŠ¨
- `npm run scrape:events:force` - å¼ºåˆ¶é‡æ–°é‡‡é›†æ‰€æœ‰æ´»åŠ¨
- `npm run scrape:events:verbose` - è¯¦ç»†æ¨¡å¼é‡‡é›†
- `npm run scrape:test` - æµ‹è¯•é‡‡é›†åŠŸèƒ½

### æ•°æ®ç®¡ç†
- `npm run events:view` - æŸ¥çœ‹æ´»åŠ¨æ•°æ®
- `npm run events:stats` - æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
- `npm run events:list` - æ˜¾ç¤ºæ´»åŠ¨åˆ—è¡¨
- `npm run events:quality` - æ•°æ®è´¨é‡åˆ†æ
- `npm run events:clean` - æ¸…ç†æ•°æ®
- `npm run events:backup` - å¤‡ä»½æ•°æ®
- `npm run events:csv` - å¯¼å‡ºCSVæ–‡ä»¶

### å·¥ä½œæµç¨‹
- `npm run events:workflow` - å®Œæ•´å·¥ä½œæµç¨‹
- `npm run events:workflow:quick` - å¿«é€Ÿæ¨¡å¼
- `npm run events:workflow:test` - æµ‹è¯•æ¨¡å¼

## ğŸ“Š æ•°æ®ç»“æ„

æ¯ä¸ªæ´»åŠ¨åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

```json
{
  "id": "3825656249900",
  "title": "æ´»åŠ¨æ ‡é¢˜",
  "time": "09/21 14:00",
  "location": "ç¦å»ºç¦å·",
  "url": "https://usergroup.huodongxing.com/event/...",
  "imageUrl": "https://cdn.huodongxing.com/...",
  "localImage": "3825656249900.jpg",
  "scrapedAt": "2025-09-22T03:20:53.520Z"
}
```

## ğŸ”§ ç³»ç»ŸåŠŸèƒ½

### 1. æ™ºèƒ½é‡‡é›†
- âœ… è‡ªåŠ¨è¯†åˆ«çº¿ä¸‹æ´»åŠ¨
- âœ… åˆ†é¡µé‡‡é›†æ”¯æŒ
- âœ… å¢é‡æ›´æ–°ï¼ˆåªé‡‡é›†æ–°æ´»åŠ¨ï¼‰
- âœ… å›¾ç‰‡è‡ªåŠ¨ä¸‹è½½
- âœ… é”™è¯¯å¤„ç†å’Œé‡è¯•

### 2. æ•°æ®æ¸…ç†
- âœ… å»é™¤é‡å¤æ´»åŠ¨
- âœ… ä¿®å¤æ— æ•ˆåœ°ç‚¹ä¿¡æ¯
- âœ… ä»æ ‡é¢˜ä¸­æå–åŸå¸‚å
- âœ… æ¸…ç†æ ¼å¼å¼‚å¸¸çš„æ•°æ®
- âœ… è‡ªåŠ¨å¤‡ä»½åŸå§‹æ•°æ®

### 3. è´¨é‡åˆ†æ
- âœ… æ•°æ®å®Œæ•´æ€§ç»Ÿè®¡
- âœ… åœ°ç‚¹ä¿¡æ¯æœ‰æ•ˆæ€§æ£€æŸ¥
- âœ… æ—¶é—´æ ¼å¼éªŒè¯
- âœ… å›¾ç‰‡ä¸‹è½½çŠ¶æ€ç»Ÿè®¡
- âœ… é—®é¢˜æ´»åŠ¨è¯†åˆ«

### 4. ç»Ÿè®¡æŠ¥å‘Š
- âœ… æŒ‰åœ°ç‚¹åˆ†å¸ƒç»Ÿè®¡
- âœ… æŒ‰æ—¶é—´åˆ†å¸ƒç»Ÿè®¡
- âœ… æ•°æ®è´¨é‡æŒ‡æ ‡
- âœ… é‡‡é›†å†å²è®°å½•
- âœ… CSVå¯¼å‡ºåŠŸèƒ½

## ğŸ“ æ–‡ä»¶ç»“æ„

```
data/events/
â”œâ”€â”€ events.json          # ä¸»æ•°æ®æ–‡ä»¶
â”œâ”€â”€ report.json          # ç»Ÿè®¡æŠ¥å‘Š
â”œâ”€â”€ events.csv           # CSVå¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ scraper.log          # é‡‡é›†æ—¥å¿—
â”œâ”€â”€ backup/              # æ•°æ®å¤‡ä»½ç›®å½•
â””â”€â”€ images/              # æ´»åŠ¨å›¾ç‰‡ç›®å½•
    â””â”€â”€ *.jpg

scripts/
â”œâ”€â”€ event-scraper.cjs    # ä¸»é‡‡é›†å™¨
â”œâ”€â”€ test-scraper.cjs     # æµ‹è¯•å·¥å…·
â”œâ”€â”€ view-events.cjs      # æ•°æ®æŸ¥çœ‹å·¥å…·
â”œâ”€â”€ clean-events.cjs     # æ•°æ®æ¸…ç†å·¥å…·
â”œâ”€â”€ events-workflow.cjs  # å·¥ä½œæµç¨‹ç®¡ç†
â””â”€â”€ run-scraper.cjs      # é‡‡é›†è¿è¡Œå™¨
```

## ğŸ› ï¸ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰é‡‡é›†å‚æ•°

ç¼–è¾‘ `scripts/event-scraper.cjs` ä¸­çš„é…ç½®ï¼š

```javascript
// æœ€å¤§é‡‡é›†é¡µæ•°
const maxPages = 20;

// è¯·æ±‚å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
const requestDelay = 2000;

// åŸå¸‚åæå–æ¨¡å¼
const cityPatterns = [
  /(åŒ—äº¬|ä¸Šæµ·|å¹¿å·|æ·±åœ³|...)/,
  // æ·»åŠ æ›´å¤šæ¨¡å¼
];
```

### æ•°æ®è´¨é‡è§„åˆ™

åœ¨ `scripts/clean-events.cjs` ä¸­è‡ªå®šä¹‰æ¸…ç†è§„åˆ™ï¼š

```javascript
// åœ°ç‚¹éªŒè¯è§„åˆ™
const isValidLocation = (location) => {
  return /[\u4e00-\u9fa5]/.test(location) && 
         !/^\d+\s+\d+/.test(location);
};

// æ—¶é—´æ ¼å¼éªŒè¯
const isValidTime = (time) => {
  return /\d{2}\/\d{2}\s+\d{2}:\d{2}/.test(time);
};
```

### æœç´¢å’Œè¿‡æ»¤

```bash
# æœç´¢ç‰¹å®šå…³é”®è¯
npm run events:view -- --search "Kiro"

# æ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨
npm run events:list -- --all

# æŸ¥çœ‹ç‰¹å®šæ•°é‡çš„æ´»åŠ¨
npm run events:list -- --limit 20
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **é‡‡é›†å¤±è´¥**
   ```bash
   # æ£€æŸ¥ç½‘ç»œè¿æ¥
   npm run scrape:test
   
   # æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   npm run scrape:events:verbose
   ```

2. **æ•°æ®è´¨é‡é—®é¢˜**
   ```bash
   # åˆ†ææ•°æ®è´¨é‡
   npm run events:quality
   
   # æ¸…ç†æ•°æ®
   npm run events:clean
   ```

3. **å›¾ç‰‡ä¸‹è½½å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤ç£ç›˜ç©ºé—´å……è¶³
   - æŸ¥çœ‹ `data/events/scraper.log` æ—¥å¿—

### æ—¥å¿—æ–‡ä»¶

- `data/events/scraper.log` - é‡‡é›†è¿‡ç¨‹æ—¥å¿—
- æ§åˆ¶å°è¾“å‡º - å®æ—¶çŠ¶æ€ä¿¡æ¯

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### é‡‡é›†æ€§èƒ½
- è°ƒæ•´è¯·æ±‚å»¶è¿Ÿé¿å…è¢«é™åˆ¶
- ä½¿ç”¨å¢é‡æ›´æ–°å‡å°‘é‡å¤é‡‡é›†
- åˆç†è®¾ç½®æœ€å¤§é¡µæ•°é™åˆ¶

### å­˜å‚¨ä¼˜åŒ–
- å®šæœŸæ¸…ç†å¤‡ä»½æ–‡ä»¶
- å‹ç¼©å†å²æ•°æ®
- ä¼˜åŒ–å›¾ç‰‡å­˜å‚¨æ ¼å¼

## ğŸ”„ å®šæ—¶ä»»åŠ¡

å¯ä»¥è®¾ç½®å®šæ—¶ä»»åŠ¡è‡ªåŠ¨é‡‡é›†ï¼š

```bash
# Linux/Mac (crontab)
0 */6 * * * cd /path/to/project && npm run events:workflow:quick

# Windows (ä»»åŠ¡è®¡åˆ’ç¨‹åº)
# åˆ›å»ºä»»åŠ¡è¿è¡Œ: npm run events:workflow:quick
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
2. è¿è¡Œæµ‹è¯•æ¨¡å¼
3. æ£€æŸ¥æ•°æ®è´¨é‡
4. æŸ¥çœ‹ç³»ç»Ÿæ–‡æ¡£

---

**æ³¨æ„**: è¯·ç¡®ä¿é‡‡é›†è¡Œä¸ºç¬¦åˆç›®æ ‡ç½‘ç«™çš„ä½¿ç”¨æ¡æ¬¾å’Œç›¸å…³æ³•å¾‹æ³•è§„ã€‚